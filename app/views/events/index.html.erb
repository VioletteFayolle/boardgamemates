
<div class="bgm-container">
  <h3>Barre de recherche et filtres</h3>

  <div >
    <%= simple_form_for :search, url: events_path, method: :get, wrapper: :default, html: { class: 'form-inline' } do |f| %>
      <div class="form-group">
        <%= f.input :city, label: false, placeholder: "Entrez un lieu", input_html: { class: "search-input" }, required: false %>
      </div>

      <div class="form-group">
        <%= f.input :date, as: :string, label: false, placeholder: "Sélectionnez une date", input_html: { class: "search-input", data: { controller: "datepicker" } }, required: false %>
      </div>

      <div class="form-group">
        <%= f.input :boardgame, label: false, placeholder: "Entrez un jeu", input_html: { class: "search-input" }, required: false %>
      </div>

      <%= f.submit "Filtrer", class: "btn-search" %>
    <% end %>
  </div>


  <div style="width: 100%; height: 25vh; margin-bottom: 20px;"
    data-controller="map"
    data-map-markers-value="<%= @markers.to_json %>"
    data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>


  <% if @events.any? %>

    <% @events.each do |event| %>
      <div class="card-event">
        <%= link_to user_path(event.creator.username), class: "link_to" do %>
          <div class="event-creator">
            <div>
              <p>Proposé par</p>
              <p><%= event.creator.username %></p>
            </div>
            <div>
              <%= cl_image_tag(event.creator.photo.key, class: "avatar") %>
            </div>
          </div>
        <% end %>
        <%= link_to event_path(event), class:"link-to" do %>
          <div>
            <h2><%= event.title %></h2>
            <p>Description : <%= event.description %></p>
            <p>Date : <%= event.date %></p>
            <p>Lieu : <%= event.city %></p>
            <p>Places : <%= event.capacity %></p>
          </div>
        <% end %>
      </div>
    <% end %>

    <% else %>
      <em>Désolé, aucun évènement trouvé.</em>
    <% end %>

</div>



<%= link_to image_tag("btn_plus.png", class:"btn-action"), new_event_path %>
